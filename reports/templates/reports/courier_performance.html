<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Rapport de Performance - {{ courier.first_name }}</title>
</head>

<body>
    <div class="header">
        <div class="logo">DELIVR-CM</div>
        <h1>Rapport de Performance</h1>
        <p>{{ courier.first_name or courier.phone_number }} | {{ start_date|date:"d/m/Y" }} - {{ end_date|date:"d/m/Y"
            }}</p>
    </div>

    <!-- Courier Info -->
    <h2>üìã Informations Coursier</h2>
    <table>
        <tr>
            <td><strong>T√©l√©phone</strong></td>
            <td>{{ courier.phone_number }}</td>
            <td><strong>Niveau</strong></td>
            <td>{{ level_info.current }}</td>
        </tr>
        <tr>
            <td><strong>Livraisons totales</strong></td>
            <td>{{ level_info.total_deliveries }}</td>
            <td><strong>Note moyenne</strong></td>
            <td>{% if level_info.rating %}{{ level_info.rating|floatformat:1 }}/5{% else %}N/A{% endif %}</td>
        </tr>
        <tr>
            <td><strong>S√©rie actuelle</strong></td>
            <td>{{ level_info.streak }} cons√©cutives</td>
            <td><strong>G√©n√©r√© le</strong></td>
            <td>{{ generated_at|date:"d/m/Y H:i" }}</td>
        </tr>
    </table>

    <!-- Summary Stats -->
    <h2>üìä R√©sum√© de P√©riode</h2>
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">{{ stats.completed|default:0 }}</div>
            <div class="stat-label">Livraisons compl√©t√©es</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.total_earnings|default:0|floatformat:0 }} XAF</div>
            <div class="stat-label">Gains totaux</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.total_distance|default:0|floatformat:1 }} km</div>
            <div class="stat-label">Distance parcourue</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{% widthratio stats.completed stats.total 100 %}%</div>
            <div class="stat-label">Taux de succ√®s</div>
        </div>
    </div>

    <!-- Daily Breakdown -->
    {% if daily_breakdown %}
    <h2>üìÖ D√©tail par Jour</h2>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Livraisons</th>
                <th>Gains</th>
                <th>Distance</th>
            </tr>
        </thead>
        <tbody>
            {% for day in daily_breakdown %}
            <tr>
                <td>{{ day.day|date:"d/m/Y" }}</td>
                <td>{{ day.count }}</td>
                <td>{{ day.earnings|floatformat:0 }} XAF</td>
                <td>{{ day.distance|floatformat:1 }} km</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}

    <div class="footer">
        <p>DELIVR-CM - Plateforme de livraison urbaine | G√©n√©r√© automatiquement</p>
        <p>Ce rapport est confidentiel et destin√© uniquement au coursier concern√©.</p>
    </div>
</body>

</html>